<!-- console-panel.component.html -->
<div class="console-panel">
  <!-- 1. HEADER FIXE -->
  <div class="console-header">
    <span class="console-title">CONSOLE V3</span>
  </div>

  <!-- 2. SECTION STATUS FIXE -->
  <div class="console-body">
    <div class="status-line">
      <span class="led green"></span>
      <span>STATUS: ONLINE</span>
    </div>
    <div class="user-line">
      <span>> USER: {{getCurrentUserName()}}</span>
    </div>

    <!-- Mode dev indicator remplace ACCESS-LVL quand actif -->
    @if (isDevMode()) {
    <div class="dev-mode-indicator">
      <span class="led orange"></span>
      <span>> DEV MODE ACTIF</span>
    </div>
    } @else {
    <div class="access-line">
      <span>> ACCESS-LVL: {{getCurrentUserLevel()}}</span>
    </div>
    }
  </div>

  <!-- 3. SECTION COMMANDES FLEXIBLE -->
  <div class="console-commands">
    @if (!isLoggedIn()) {
    <!-- Section vide propre quand pas connectÃ© -->
    <div class="action-group">
      <span class="group-title">> SYSTÃˆME EN ATTENTE</span>
    </div>
    }

    @if (isLoggedIn()) {
    <!-- Boutons admin (seulement hors chroniques ET hors mon-compte) -->
    @if (shouldShowAdminButtons() && currentUser()?.role === 'admin') {
    <div class="action-group">
      <span class="group-title">> FONCTIONS ADMIN</span>
      <button class="console-btn" (click)="addCategory()">AJOUTER CATEGORIE</button>
      <button class="console-btn" (click)="addList()">AJOUTER LISTE</button>
      <button class="console-btn" (click)="addItem()">AJOUTER ITEM</button>
    </div>
    }

    <!-- Boutons chroniques (pour tous les utilisateurs connectÃ©s dans chroniques) -->
    @if (shouldShowUserButtons()) {
    <div class="action-group">
      <span class="group-title">> FONCTIONS CHRONIQUES</span>
      <button class="console-btn" (click)="newStory()">NOUVELLE HISTOIRE</button>
      <button class="console-btn" (click)="myStories()">MES HISTOIRES</button>
    </div>
    }

    <!-- Section MODE DEV - Logique corrigÃ©e -->
    @if (isLoggedIn()) {
    <div class="action-group">
      <span class="group-title">> MODE DEV</span>
      @if (currentUser()?.username === 'Snot') {
      <button class="console-btn dev-btn" (click)="switchToElena()">
        SWITCH TO ELENA
      </button>
      }
      @if (currentUser()?.username === 'Elena Nova') {
      <button class="console-btn dev-btn" (click)="switchToSnot()">
        SWITCH TO SNOT
      </button>
      }
    </div>
    }
    }
  </div>

  <!-- 4. FOOTER ADAPTATIF -->
  @if (isLoggedIn()) {
  <!-- Footer pour utilisateurs connectÃ©s -->
  <div class="console-footer">
    <span class="group-title">> PARAMETRES DU COMPTE</span>
    <button class="console-btn" (click)="openAccount()">
      MON COMPTE
    </button>
    <button class="console-btn logout" (click)="logout()">
      DECONNEXION
    </button>
  </div>
  } @else {
  <!-- Footer pour visiteurs non connectÃ©s -->
  <div class="console-footer">
    <span class="group-title">> AUTHENTIFICATION</span>
    <button class="console-btn" (click)="openLogin()">
      [âš¡] CONNEXION
    </button>
    <button class="console-btn" (click)="openRegister()">
      [ðŸ‘¤] INSCRIPTION
    </button>
  </div>
  }
</div>