<!-- console-panel.component.html -->
<div class="console-panel">
  <!-- 1. HEADER FIXE -->
  <div class="console-header">
    <span class="console-title">CONSOLE V3</span>
  </div>

  <!-- 2. SECTION STATUS FIXE -->
  <div class="console-body">
    <div class="status-line">
      <span class="led green"></span>
      <span>STATUS: ONLINE</span>
    </div>
    <div class="user-line">
      <span>> USER: {{getCurrentUserName()}}</span>
    </div>
    <div class="access-line">
      <span>> ACCESS-LVL: {{getCurrentUserLevel()}}</span>
    </div>

    <!-- Mode dev indicator -->
    @if (isDevMode()) {
    <div class="dev-mode-indicator">
      <span class="led orange"></span>
      <span>> DEV MODE ACTIF</span>
    </div>
    }
  </div>

  <!-- 3. SECTION COMMANDES FLEXIBLE -->
  <div class="console-commands">
    @if (!isLoggedIn()) {
      <!-- Section Connexion -->  
      <div class="action-group">
        <button class="console-btn" (click)="openLogin()">
          [âš¡] CONNEXION
        </button>
        <button class="console-btn" (click)="openRegister()">
          [ðŸ‘¤] INSCRIPTION
        </button>
      </div>
    }

    @if (isLoggedIn()) {
      <!-- Boutons admin (seulement hors chroniques) -->
      @if (shouldShowAdminButtons()) {
        <div class="action-group">
          <span class="group-title">> FONCTIONS ADMIN</span>
          <button class="console-btn" (click)="addCategory()">AJOUTER CATEGORIE</button>
          <button class="console-btn" (click)="addList()">AJOUTER LISTE</button>
          <button class="console-btn" (click)="addItem()">AJOUTER ITEM</button>
          
          <span class="group-title">> MODE DEV</span>
          @if (isAdmin() && !isDevMode()) {
            <button class="console-btn dev-btn" (click)="switchToElena()">
              SWITCH ELENA
            </button>
          }

          @if (isDevMode()) {
            <button class="console-btn dev-btn" (click)="exitDevMode()">
              RETOUR ADMIN
            </button>
          }
        </div>
      }

      <!-- Boutons chroniques (seulement dans chroniques) -->
      @if (shouldShowUserButtons()) {
        <div class="action-group">
          <span class="group-title">> FONCTIONS UTILISATEUR</span>
          <button class="console-btn" (click)="newStory()">NOUVELLE HISTOIRE</button>
          <button class="console-btn" (click)="myStories()">MES HISTOIRES</button>
          
          @if (isAdmin() && !isDevMode()) {
            <button class="console-btn dev-btn" (click)="switchToElena()">
              SWITCH ELENA
            </button>
          }

          @if (isDevMode()) {
            <button class="console-btn dev-btn" (click)="exitDevMode()">
              RETOUR ADMIN
            </button>
          }
        </div>
      }
    }
  </div>

  <!-- 4. FOOTER FIXE -->
  @if (isLoggedIn()) {
    <div class="console-footer">
      <span class="group-title">> PARAMETRES DU COMPTE</span>
      <button class="console-btn" (click)="openAccount()">
        MON COMPTE
      </button>
      <button class="console-btn logout" (click)="logout()">
        DECONNEXION
      </button>
    </div>
  }
</div>